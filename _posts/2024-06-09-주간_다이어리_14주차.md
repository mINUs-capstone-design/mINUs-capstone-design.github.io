---
layout: single
title:  "주간 다이어리 - 14주차"
excerpt: "..."
categories: weeklyDiary

toc: true
toc_sticky: true
---


## 활동 기록

---

### 팀 활동

- 6월 3일(월) 11:30 ~ 19:30 (오프라인 개발)
- 6월 4일(화) 11:10 ~ 18:50 (오프라인 개발)
- 6월 5일(수) 12:00 ~ 20:00 (오프라인 개발)
- 6월 6일(목) 11:20 ~ 16:00 (오프라인 개발)
- 6월 7일(금) 11:30 ~ 19:30 (오프라인 개발)

→ 총 36시간 20분 진행

## 진행 상황

---

## 1) batch size에 따른 성능 변화 테스트

batch size에 의해서도 모델의 성능이 변할 수 있다는 정보를 얻어, batch size를 조정하여 모델 성능변화의 테스트를 진행하였다.

대상 모델 : Siamese_net_r1.pt ( batch size : 64, epoch : 50)

→ batch size를 32, 16으로 변경 후 재 학습시켜 r1_32batch, r1_16batch 생성

- 테스트 내용
    1. 외국인 발음 녹음 데이터를 평가지표를 이용하여 사람이 직접 평가
    2. r1, r1_32batch, r1_16batch 각 모델들을 통하여 평가
    3. 사람평가, 모델평가의 차이를 계산
    4. 차이값을 비교하여 성능을 비교

- 결과
    - 음성 데이터 : “10만원만 빌려줄 수 있어요?”
    
    [VAD_10만원.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/77673005-6834-4d33-b434-06858b6c1325/VAD_10%E1%84%86%E1%85%A1%E1%86%AB%E1%84%8B%E1%85%AF%E1%86%AB.wav)
    
    - 평가지표 점수 : 53점
    - r1 점수 : 45 → 8점 차이
        - 필터링 2번 : 39 → 14점 차이
    - r1 (32batch) : 21 → 32점 차이
        - 필터링 2번 : 54 → 1점 차이
    - r1 (16batch) : 38 → 15점 차이
        - 필터링 2번 : 73 → 20점 차이
    - openCV : 0.25
    
    → r1 > r1_16 > r1_32
    
    - 음성 데이터 : “질문”
    
    [VAD_질문.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/472a3b26-d248-4f20-9de6-591ecdb20d47/VAD_%E1%84%8C%E1%85%B5%E1%86%AF%E1%84%86%E1%85%AE%E1%86%AB.wav)
    
    - 평가지표 점수 : 46점
    - r1 점수: 39 → 7점 차이
    - r1 (32batch) : 43 → 3점 차이
    - r1 (16batch) : 56 → 10점 차이
    - etri → 2.91
    - openCV : 0.74
    
    → r1(32) > r1 > r1(16)
    
    - 음성 데이터 “중국”
    
    [VAD_중국.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/824d5171-29e7-4bab-9b47-cd28a272ff0f/VAD_%E1%84%8C%E1%85%AE%E1%86%BC%E1%84%80%E1%85%AE%E1%86%A8.wav)
    
    - 평가지표 점수 : 52점
    - r1 점수 : 0 → 52점 차이
        - 필터링 2번 : 33 → 19점 차이
    - r1 (32batch) : 44 → 8점 차이
        - 필터링 2번 : 66 → 14점 차이
    - r1 (16batch) : 44 → 8점 차이
        - 필터링 2번 : 53 → 1점 차이
    - etri : 2.66점
    - opencv - 0.72
    
    → r1(32)=r1(16) > r1
    
    - 음성 데이터 “한국어”
    
    [VAD_한국어.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/b49124c8-e449-44e1-b615-b37a65d1e341/VAD_%E1%84%92%E1%85%A1%E1%86%AB%E1%84%80%E1%85%AE%E1%86%A8%E1%84%8B%E1%85%A5.wav)
    
    - 평가지표 점수 : 66점
    - r1 점수 : 72 → 6점 차이.
        - 필터링 2번 : 68 → 2점 차이
    - r1 (32batch) : 78 → 12점 차이
        - 필터링 2번 : 86 → 20점 차이
    - r1 (16batch) : 28 → 38점 차이
        - 필터링 2번 : 46 → 20점 차이
    - opencv : 0.44
    - etri : 2.8
    
    → r1 > r1(32) > r1(16)
    

- 쉴 거에요
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/e96fbcef-239a-4b4c-8ffc-1c39a0e8d4ec/VAD_record.wav)
    
    - 평가지표 점수 : 40점
    - r1 점수 : 42 → 2점 차이
        - 필터링 2번 : 85 → 45점 차이
    - r1 (32batch) : 57 → 17점 차이
        - 필터링 2번 : 67 → 27점 차이
    - r1 (16batch) : 45 → 5점 차이
        - 필터링 2번 : 83 → 43점 차이
    - etri : 2.98
    - openCV : 0.44

→ 모델 자체가 가볍고 학습 데이터 셋도 많지 않기 때문에 batch size에 따른 성능의 차이는 크게 존재하지 않았다.

## 2) 메인 프로그램 디버깅 진행

사용자의 편의성을 비롯하여 메인 프로그램의 완성도를 높이기 위하여, 많은 테스트를 통하여 예외 케이스나 버그를 찾는 작업을 진행하였다. 다음의 요소들은 디버깅 작업을 통해서 발견된 문제들이다.

- 결과 추론시간동안 표시되는 다이얼의 표시시간이 추론시간과 동기화가 되지 않고 고정시간동안 돌아가도록 설계되어, 실제 추론이 일찍 끝났음에도 다이얼이 계속 돌아가 처리속도가 늦어지는 것 처럼 보이는 문제
    - → 멀티스레드가 원활하게 이루어지지 않아 임시로 설계한 것이 원인. 다이얼이 돌아가는 이미지를 제거하고 안내문구만으로 표시하여 추론이 끝나는 대로 화면이 넘어갈 수 있도록 수정 예정
    
- 유사도 안내결과(점수)만 봐서는 자신의 발음 실력을 객관적으로 판단할 수 없는 문제
    - → 각 점수대 별 실력을 별도의 텍스트를 통하여 안내해줄 수 있도록 수정 예정. 구체적인 점수와 그에 따른 실력표는 다음과 같음.
        - 0 ~ 30 : 발음이 많이 미숙 (빨강)
        - 30 ~ 50 : 외국인(주황)
        - 50 : 70 : 발음 꽤 하는 외국인(노랑)
        - 70 ~ 100 : 한국인(초록)

- 학습 시작버튼이 너무 작아 터치스크린으로 이용 시 클릭이 제대로 되지 않는 문제 & 성별 선택 창에서 성별을 선택하지 않아도 다음단계로 넘어가지는 문제
    - → 학습 시작버튼을 제거 & 성별을 선택하면 다음 단계로 바로 진행되도록 수정 예정
    
- 사용자가 성별을 잘못 선택해도 결과에 영향을 미칠수도 있다는 정보를 별도로 안내해주지 않는 문제
    - → 성별 선택창에서 해당 안내를 추가하도록 수정 예정

- 소음 측정과 녹음시작 간의 시간차가 생길 경우 소음 측정결과가 동기화되지 않는 문제
    - → 녹음을 시작할 경우 측정을 다시 진행하여 측정결과 동기화 되도록 수정 예정
    
- 소음 측정 결과의 직관성이 떨어지는 문제
    - → 기존의 텍스트에서 초록,주황,빨강의 신호등을 연상시키는 이미지로 변환하여 직관성 높일 예정

- 기준이 되는 단어와 다른 단어를 녹음 하여도 평가가 진행되는 문제
    - → 평가 진행 전 단계에 사용자가 녹음한 단어와 기준데이터의 단어의 매칭도를 판단하는 단계를 추가하여 기준 단어와 다른 단어가 녹음되었을 경우 추론이 진행되지 않도록 수정 예정
    

### 수정 완료

- openCV의 추론 값이 1.0으로 나올 경우( 녹음이 제대로 진행되지 않았을 경우) 에도 점수를 추론하는 문제
    - → 녹음이 제대로 이루어지지 않는 경우에는 측정이 이루어지지 않도록 결과 문구를 수정하였다.

- 재 녹음을 여러번 진행할 시 녹음파일이 쌓이게 되는 문제
    - 재녹음 버튼을 누르면 추론에 사용되었던 기존의 녹음 데이터들을 지우게하여 해당 문제를 수정하였다.

## 3) 외국인 발음 테스트 진행 - 0

테스트 모델 : siamese_net_r1.pt

1. **괴물**
    
    원본
    
    [record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/a0e2ea90-3dec-4d90-a9f0-cd6738b61087/record.wav)
    
    노이즈필터 한 번
    
    score : 62
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/0f7b783c-7784-4221-b77e-25d519383999/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/71d6bd5a-03ad-473b-a090-05edc92045e6/VAD_TTS_girl.wav)
    
    노이즈필터 두 번
    
    score : 67
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/5f70a53c-c55e-43eb-a2e8-3f17de85b93c/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/632aafab-f5e4-41c5-b9d4-0e52e494c85b/VAD_TTS_girl.wav)
    

1. **이야기**
    
    원본
    
    [record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/18210e4f-fd0f-4117-a29b-20ff6a9d38ba/record.wav)
    
    노이즈필터 한 번
    
    score : 76
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/ec37f716-ade2-48b5-ba12-c4fb564d18f7/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/7e6b472f-88ce-447b-812e-ead016bd4800/VAD_TTS_girl.wav)
    
    노이즈필터 두 번
    
    score : 77
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/98301095-31d7-4966-b452-a7bebb575129/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/ccd33600-7f00-4c82-bc68-91edb54d709b/VAD_TTS_girl.wav)
    

1. **가족이 몇 명이에요?**
    
    원본
    
    [record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/db27a2c3-0185-4752-b542-3b7f15186a11/record.wav)
    
    노이즈필터 한 번
    
    score : 74
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/9360b5cd-85ed-4cb2-8463-77e591cb9fd9/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/095581c7-5893-46e2-a587-45ca1ca0a598/VAD_TTS_girl.wav)
    
    노이즈필터 두 번
    
    score : 75
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/57fdd4c1-05c1-432a-99f7-7db88c1d7a24/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/ce56c42b-4f8f-42ed-b903-1238b9425d56/VAD_TTS_girl.wav)
    

1. **얼굴 안 좋은데 무슨 일 있어요?**
    
    원본
    
    [record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/73d1ff84-7192-4d5c-aa3f-fddf1994c56d/record.wav)
    
    노이즈필터 한 번
    
    score : 73
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/7dc303b6-f7b3-4085-b434-d92a5af34df1/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/ad6cf8d5-1ee7-4479-8dd0-bf0bcbc40cc9/VAD_TTS_girl.wav)
    
    노이즈필터 두 번
    
    score : 68
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/43dd5348-38fe-4b60-8720-318af261f8d3/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/85a7a258-b9be-4e92-91e2-00b60a92853a/VAD_TTS_girl.wav)
    

1. **더워요**
    
    원본
    
    [record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/0f63abf7-d11a-4a9c-822c-bd874ff11054/record.wav)
    
    노이즈필터 한 번
    
    score : 49
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/0565a33b-c5f0-413b-aa76-6f48dddc56b2/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/eec4c56a-375d-418e-a8fb-8a2631cb926c/VAD_TTS_girl.wav)
    
    노이즈필터 두 번
    
    score : 63
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/05e92f0e-21a2-45af-ad70-41a442d18328/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/2d34242a-fe4c-4d85-85f2-4854ced54f25/VAD_TTS_girl.wav)
    

1. **다치다**
    
    원본
    
    [record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/59b0eac2-a826-4ca7-a842-ea5ce551e352/record.wav)
    
    노이즈필터 한 번
    
    score : 65
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/811ca640-c0a2-4055-bd13-567231cb3ef7/VAD_record.wav)
    
    VAD_TTS_man.wav
    
    [VAD_TTS_man.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/922a1ed1-62f0-474b-8f3b-a955f3a74096/VAD_TTS_man.wav)
    
    노이즈필터 두 번
    
    score : 79
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/54c67a4f-ca5c-4f43-8c97-dd4250db1db7/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_man.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/3d20d36f-8f6c-4dfc-a10f-14379bd03c6b/VAD_TTS_man.wav)
    

1.  **라면**
    
    원본
    
    [record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/b274eeb0-17a3-4f60-a4ab-761534178695/record.wav)
    
    노이즈필터 한 번
    
    score : 42
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/b731a803-94d7-4ae0-88c7-807de92888cd/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/eef4b9d9-4f2b-44c0-b780-07f757a18dee/VAD_TTS_girl.wav)
    
    노이즈필터 두 번
    
    score : 50
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/23eb562c-b69c-4615-a988-43399486d738/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/7a7854bc-b632-4b51-a73e-adfe121d8ece/VAD_TTS_girl.wav)
    

1. **내일 몇 시까지 오면 될까요?**
    
    원본
    
    [record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/5ef1a1b5-5f98-42ac-97a6-5cccd2593db9/record.wav)
    
    노이즈필터 한 번
    
    score : 64
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/fc2a791d-1deb-4f5e-bf41-4566a705634b/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/3c25f2b8-efe6-4349-89b4-91f6f579a435/VAD_TTS_girl.wav)
    
    노이즈필터 두 번
    
    score : 58
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/46d7b74f-4a0b-497e-bb3e-e064c7c54d75/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/43764078-1fd2-4e6b-a90f-da61759fffa3/VAD_TTS_girl.wav)
    

1. **그거 내가 한 거 아니야**
    
    원본
    
    [record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/5c0cd521-9e66-4864-8498-9f7976d6f0d5/record.wav)
    
    노이즈필터 한 번
    
    score : 81
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/19935d62-5a26-44d3-95b0-cdbd77893c41/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/c823409f-0a89-4ab0-b714-16b0496d4023/VAD_TTS_girl.wav)
    
    노이즈필터 두 번
    
    score : 63
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/ef079267-355c-44e6-ad59-4f7f7dd7ca8c/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/7472f522-aab6-4a41-a7f5-74a7960603e8/VAD_TTS_girl.wav)
    

1. **바쁘다**
    
    원본
    
    [record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/1b1f506e-c7f2-480c-adcb-e7ccab36b265/record.wav)
    
    노이즈필터 한 번
    
    score : 77
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/011c354c-248f-417b-9623-f60a5eb197a5/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/ee6711cc-c051-4fbe-8e64-8ed4fca017f6/VAD_TTS_girl.wav)
    
    노이즈필터 두 번
    
    score : 77
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/410f0f50-354c-49eb-bbc8-af8d17747771/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/9f0a9ade-fa5c-494a-ba9d-86ca5c3e620a/VAD_TTS_girl.wav)
    

1. **옛날**
    
    원본
    
    [record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/8da38cd9-5cf9-4d3b-adf2-285b95b70d77/record.wav)
    
    노이즈필터 한 번
    
    score : 41
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/4203386b-778c-4007-a3f2-fff1d94b7c58/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/39e0c005-0746-4a67-8cef-58051be6d6bb/VAD_TTS_girl.wav)
    
    노이즈필터 두 번
    
    score : 65
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/925e57ad-07ee-406e-98ec-698492eb8e2d/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/8022e721-2997-4fb9-b7db-9327b523a66c/VAD_TTS_girl.wav)
    

1. **이따 전화할게**
    
    원본
    
    [record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/b59f5e44-198b-4789-8207-b4443550c91e/record.wav)
    
    노이즈필터 한 번
    
    score : 64
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/34ac1fe5-46e4-482e-87f2-cd71b4af272a/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/85f4e5fe-82b7-42dd-b5b1-63e04d427c4e/VAD_TTS_girl.wav)
    
    노이즈필터 두 번
    
    score : 78
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/65d2130a-7e20-4047-b6f0-61c64f8cb9ac/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/7e80fb57-dd78-41bb-8290-3adf8cdfd3eb/VAD_TTS_girl.wav)
    

## 4) 테스트 결과를 OpenCV를 통해 측정 & 비교

1. **괴물**
    
    OpenCV 필터1 결과 : 62
    
    OpenCV 필터2 결과 : 58
    

1. **이야기**
    
    OpenCV 필터1 결과 : 70
    
    OpenCV 필터2 결과 : 70
    

1. **가족이 몇 명이에요?**
    
    OpenCV 필터1 결과 : 62
    
    OpenCV 필터2 결과 : 60
    

1. **얼굴 안 좋은데 무슨 일 있어요?**
    
    OpenCV 필터1 결과 : 52
    
    OpenCV 필터2 결과 : 50
    

1. **더워요**
    
    OpenCV 필터1 결과 : 70
    
    OpenCV 필터2 결과 : 65
    

1. **다치다**
    
    OpenCV 필터1 결과 : 60
    
    OpenCV 필터2 결과 : 58
    

1. **라면**
    
    OpenCV 필터1 결과 : 40
    
    OpenCV 필터2 결과 : 31
    

1. **내일 몇 시까지 오면 될까요?**
    
    OpenCV 필터1 결과 : 38
    
    OpenCV 필터2 결과 : 40
    

1. **그거 내가 한 거 아니야**
    
    OpenCV 필터1 결과 : 47
    
    OpenCV 필터2 결과 : 41
    

1. **바쁘다**
    
    OpenCV 필터1 결과 : 29
    
    OpenCV 필터2 결과 : 27
    

1. **옛날**
    
    OpenCV 필터1 결과 : 63
    
    OpenCV 필터2 결과 : 65
    

1. **이따 전화할게**
    
    OpenCV 필터1 결과 : 46
    
    OpenCV 필터2 결과 : 45
    

## 5) UI 수정 사항

### 수정 예정 사항 및 완료

- 결과 추론시간동안 표시되는 다이얼의 표시시간이 추론시간과 동기화가 되지 않고 고정시간동안 돌아가도록 설계되어, 실제 추론이 일찍 끝났음에도 다이얼이 계속 돌아가 처리속도가 늦어지는 것 처럼 보이는 문제
    - → 멀티스레드가 원활하게 이루어지지 않아 임시로 설계한 것이 원인. 다이얼이 돌아가는 이미지를 제거하고 안내문구만으로 표시하여 추론이 끝나는 대로 화면이 넘어갈 수 있도록 수정 예정
    
    문구 간단하게 작성 완료
    
    → 결과 측정중입니다 문구 제시로 수정
    
- 유사도 안내결과(점수)만 봐서는 자신의 발음 실력을 객관적으로 판단할 수 없는 문제
    - → 각 점수대 별 실력을 별도의 텍스트를 통하여 안내해줄 수 있도록 수정 예정. 구체적인 점수와 그에 따른 실력표는 다음과 같음.
        - 0 ~ 30 : 발음이 많이 미숙 (빨강)
        - 30 ~ 50 : 외국인(주황)
        - 50 : 70 : 발음 꽤 하는 외국인(노랑)
        - 70 ~ 100 : 한국인(초록)
        - → 해당 이미지 혹은 텍스트를 넣을 수 있는 공간 생성 완료 및 제작 완료

- 학습 시작버튼이 너무 작아 터치스크린으로 이용 시 클릭이 제대로 되지 않는 문제 & 성별 선택 창에서 성별을 선택하지 않아도 다음단계로 넘어가지는 문제
    - → 학습 시작버튼을 제거 & 성별을 선택하면 다음 단계로 바로 진행되도록 수정 예정

→ 성별 선택 시 바로 진행.

- 사용자가 성별을 잘못 선택해도 결과에 영향을 미칠수도 있다는 정보를 별도로 안내해주지 않는 문제
    - → 성별 선택창에서 해당 안내를 추가하도록 수정 예정
    
    → 빨간색 문구로 주의 문구 작성 완료
    
- 소음 측정과 녹음시작 간의 시간차가 생길 경우 소음 측정결과가 동기화되지 않는 문제
    - → 녹음을 시작할 경우 측정을 다시 진행하여 측정결과 동기화 되도록 수정 예정
    
    → 코드 상 이미 구현 되어 있음 이미지 추가해서 수정하면 완료
    
    →소음 측정 기능 각 부분 별로 추가 완료
    
- 소음 측정 결과의 직관성이 떨어지는 문제
    - → 기존의 텍스트에서 초록,주황,빨강의 신호등을 연상시키는 이미지로 변환하여 직관성 높일 예정

 → 이미지 추가 완료 → 신호등 형식으로 이미지 변경 위치또한 오른쪽 상단으로 변경

- 기준이 되는 단어와 다른 단어를 녹음 하여도 평가가 진행되는 문제
    - → 평가 진행 전 단계에 사용자가 녹음한 단어와 기준데이터의 단어의 매칭도를 판단하는 단계를 추가하여 기준 단어와 다른 단어가 녹음되었을 경우 추론이 진행되지 않도록 수정 예정
    - STT를 사용해서 사용자의 발음과 제시된 단어를 비교해서 평가가 가능하도록 설정
    
    *stt코드*
    
    ```python
    import io
    from google.cloud import speech_v1p1beta1 as speech
    from google.oauth2 import service_account
    from pydub import AudioSegment
    
    #--------------------------------------------------
    def transcribe_audio(audio_file_path):
        credentials = service_account.Credentials.from_service_account_file('speech-to-text-425408-a797567b8e72.json')
        client = speech.SpeechClient(credentials=credentials)
    
        # pydub를 사용하여 오디오 파일을 불러오고 WAV 형식으로 변환
        audio = AudioSegment.from_file(audio_file_path)
        audio = audio.set_channels(1)  # Mono 채널로 변환
        audio = audio.set_frame_rate(22050)  # 샘플 레이트를 16000Hz로 설정 (필요에 따라 변경 가능)
    
        # 메모리 내에서 바이너리 데이터로 변환
        audio_buffer = io.BytesIO()
        audio.export(audio_buffer, format="wav")
        audio_buffer.seek(0)
        content = audio_buffer.read()
    
        recognition_audio = speech.RecognitionAudio(content=content)
        config = speech.RecognitionConfig(
            encoding=speech.RecognitionConfig.AudioEncoding.LINEAR16,
            sample_rate_hertz=22050,
            language_code="ko-KR",
        )
    
        response = client.recognize(config=config, audio=recognition_audio)
    
        for result in response.results:
            print("Transcript: {}".format(result.alternatives[0].transcript))
            return format(result.alternatives[0].transcript)
    
    # 예제로 사용할 오디오 파일의 경로
    # audio_file_path = "record.wav"
    #
    # transcribe_audio(audio_file_path)
    
    ```
    
    출력 값을 비교하여 결과 수정
    
    ```python
    if opencv_score == 1 or opencv_score < 0.2 or global_TTS_sentence != global_selected_sentence:
    	터무니 없이 소음이 들어가거나 혹은 해당 발음을 발음하지 않
    else:
    	평가 진행.
    ```
    

## 7) 외국인 발음 테스트 - 1

학교 외국인 학생을 섭외하여 발음 테스트를 진행하였음.

테스트 모델 : siamese_net_r1.pt

1. **이야기**
    
    원본
    
    [record_1.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/39401935-d138-4a22-a263-84ebaaf4fa31/record_1.wav)
    
    노이즈필터 한 번
    
    score : 14
    
    CCOEFF : 30
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/77f7c811-5a98-4008-8a70-571e3908cab8/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/15234503-6771-4a11-88f3-d1927a0a09f0/VAD_TTS_girl.wav)
    

1. **바쁘다 → 녹음 에러**
    
    원본
    
    [record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/3eaf6a97-35b0-4ac5-9c35-46a1e43b59d5/record.wav)
    
    노이즈필터 한 번
    
    score : 0
    
    CCOEFF : 32
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/a25a76ec-dcf9-4a8a-8a79-8b5c54c667a0/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/566dacdf-0e83-4265-b271-3a9268d21c71/VAD_TTS_girl.wav)
    

1. **짓누르다**
    
    원본
    
    [record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/a1ae862c-97e0-485d-8984-ebb24fa95f4a/record.wav)
    
    노이즈필터 한 번
    
    score : 24
    
    CCOEFF : 61
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/18fc8b47-4f21-4521-a0e1-c5106a545a5e/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/0dd35739-006a-47c1-86ab-a84b28727f23/VAD_TTS_girl.wav)
    

1. **노력**
    
    원본
    
    [record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/13bef8e7-5bce-472b-a415-14eee002e3f6/record.wav)
    
    노이즈필터 한 번
    
    score : 75
    
    CCOEFF : 54
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/d5969805-46b5-43c2-ab62-5f096279df34/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/96274bc3-519e-4cad-aa60-73dcb247c903/VAD_TTS_girl.wav)
    

1. **라면**
    
    원본
    
    [record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/e8d4f8ab-85eb-4339-a53d-77b7d6989ffc/record.wav)
    
    노이즈필터 한 번
    
    score : 27
    
    CCOEFF : 58
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/e3066554-f68e-465c-8b83-ef7f52ef9b87/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/e2214ab8-80e6-4f9e-a0c7-33b2c9d42f4a/VAD_TTS_girl.wav)
    

1. **옛날**
    
    원본
    
    [record_2.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/24369b2c-9a81-4e4b-8211-df15cdf726e7/record_2.wav)
    
    노이즈필터 한 번
    
    score : 23
    
    CCOEFF : 70
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/575d6ef5-232a-4d70-9019-876589ee5eb6/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/14e01585-24b2-45bf-b4b6-9f7ed8866857/VAD_TTS_girl.wav)
    

1. **가족이 몇 명이에요?**
    
    원본
    
    [record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/22acceb5-099e-4872-97a3-aaf18c1ed279/record.wav)
    
    노이즈필터 한 번
    
    score : 77
    
    CCOEFF : 30
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/07e9aab0-3437-42ee-b924-6cd3fa8291be/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/959700eb-f169-46ff-8365-3b14a6419ae7/VAD_TTS_girl.wav)
    

1. **내일 몇 시까지 오면 될까?**
    
    원본
    
    [record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/53346baa-568a-41ca-a111-a10c3e47150e/record.wav)
    
    노이즈필터 한 번
    
    score : 62
    
    CCOEFF : 21
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/475085a4-d0e5-4ed0-9775-8a53dcd0d111/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/ab2df057-d81f-4429-9325-d888c791bb21/VAD_TTS_girl.wav)
    

1. **열심히**
    
    원본
    
    [record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/132a4462-6bed-47be-9bb9-8dde1e183834/record.wav)
    
    노이즈필터 한 번
    
    score : 42
    
    CCOEFF : 57
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/832e6bcb-895a-4fc7-bcb2-64d5b43eac17/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/78d43605-0b18-4d77-b344-0a799ca14454/VAD_TTS_girl.wav)
    

1. **이것 좀 주세요**
    
    원본
    
    [record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/d6cd04ee-c456-47a6-b1b8-e7c783019d70/record.wav)
    
    노이즈필터 한 번
    
    score : 43
    
    CCOEFF : 35
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/e3c2bd3d-f91d-4a28-96e7-ba1934a16c02/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/399a2ebe-6e11-4ac1-a64d-c9e08c5eaf1a/VAD_TTS_girl.wav)
    

## 8) 실제 외국인 발음 테스트 - 2

1번의 테스트와 조건 동일

테스트 모델 : siamese_net_r1.pt

1. **이야기**
    
    원본
    
    [record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/33b188a4-6873-4c72-842c-d22a0f701276/record.wav)
    
    노이즈필터 한 번
    
    *노이즈 제거 전*
    
    score : 32
    
    CCOEFF : 62
    
    *노이즈 제거 후*
    
    score : 62
    
    CCOEFF : 60
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/b656df26-79da-475b-adec-be23ecb4823b/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/15234503-6771-4a11-88f3-d1927a0a09f0/VAD_TTS_girl.wav)
    

1. **바쁘다 → 테스트 1에선 삭제했었음**
    
    원본
    
    [record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/aaa13288-a9fb-4136-ac2d-8cb4f5a4aac7/record.wav)
    
    노이즈필터 한 번
    
    *노이즈 제거 전*
    
    score : 43
    
    CCOEFF : 47
    
    *노이즈 제거 후*
    
    score : 5
    
    CCOEFF : 46
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/25518e9e-3722-4263-bacf-ac2b558119ef/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/566dacdf-0e83-4265-b271-3a9268d21c71/VAD_TTS_girl.wav)
    

1. **짓누르다**
    
    원본
    
    [record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/66dcd290-9f75-41cb-91a3-d173221e5e9b/record.wav)
    
    노이즈필터 한 번
    
    *노이즈 제거 전*
    
    score : 53
    
    CCOEFF : 42
    
    *노이즈 제거 후*
    
    score : 18
    
    CCOEFF : 39
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/14f1c854-7fd9-403c-983a-458d5bd2ed8b/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/0dd35739-006a-47c1-86ab-a84b28727f23/VAD_TTS_girl.wav)
    

1. **노력**
    
    원본
    
    [record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/f2946ff9-acc8-4249-ab68-8603398b26b0/record.wav)
    
    노이즈필터 한 번
    
    *노이즈 제거 전*
    
    score : 48
    
    CCOEFF : 57
    
    *노이즈 제거 후*
    
    score : 62
    
    CCOEFF : 55
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/83b5527d-10a8-4e34-aa4b-4601244fa181/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/96274bc3-519e-4cad-aa60-73dcb247c903/VAD_TTS_girl.wav)
    

1. **라면 → 마지막에 주변 잡음까지 잡힘…**
    
    원본
    
    [record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/16191f99-bd34-4288-a732-a50be03487da/record.wav)
    
    노이즈필터 한 번
    
    *노이즈 제거 전*
    
    score : 0
    
    CCOEFF : 0
    
    *노이즈 제거 후*
    
    score : 0
    
    CCOEFF : 0
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/4b12dd1a-c9e9-4649-b59a-1f32b7a5720f/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/e2214ab8-80e6-4f9e-a0c7-33b2c9d42f4a/VAD_TTS_girl.wav)
    

1. **옛날**
    
    원본
    
    [record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/2a087c1a-e125-42bb-9b88-0f71731d4956/record.wav)
    
    노이즈필터 한 번
    
    *노이즈 제거 전*
    
    score : 0
    
    CCOEFF : 67
    
    *노이즈 제거 후*
    
    score : 19
    
    CCOEFF : 65
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/29ba9dba-5e38-43b6-b715-dd4126fc0c52/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/14e01585-24b2-45bf-b4b6-9f7ed8866857/VAD_TTS_girl.wav)
    

1. **가족이 몇 명이에요?**
    
    원본
    
    [record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/3f479051-2a40-49e7-af61-f48c9edb6351/record.wav)
    
    노이즈필터 한 번
    
    *노이즈 제거 전*
    
    score : 74
    
    CCOEFF : 50
    
    *노이즈 제거 후*
    
    score : 52
    
    CCOEFF : 50
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/3f7db8d2-6f5c-4e53-824f-e0979c3459f6/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/959700eb-f169-46ff-8365-3b14a6419ae7/VAD_TTS_girl.wav)
    

1. **내일 몇 시까지 오면 될까?**
    
    원본
    
    [record_6.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/747533b5-286c-4ddc-8dba-29144503e5f4/record_6.wav)
    
    노이즈필터 한 번
    
    *노이즈 제거 전*
    
    score : 65
    
    CCOEFF : 50
    
    *노이즈 제거 후*
    
    score : 44
    
    CCOEFF : 47
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/3ac055cc-8b36-4870-a652-bcf29b996cfd/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/ab2df057-d81f-4429-9325-d888c791bb21/VAD_TTS_girl.wav)
    

1. **열심히**
    
    원본
    
    [record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/9a020b7e-9c27-42fc-8149-ba1dbcc3db67/record.wav)
    
    노이즈필터 한 번
    
    *노이즈 제거 전*
    
    score : 39
    
    CCOEFF : 60
    
    *노이즈 제거 후*
    
    score : 64
    
    CCOEFF : 57
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/728a23a5-7e57-46d2-bf80-eab59d5f613d/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/78d43605-0b18-4d77-b344-0a799ca14454/VAD_TTS_girl.wav)
    

1. **이것 좀 주세요**
    
    원본
    
    [record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/1e03d8ec-8bc1-4bf2-867d-56c748451f60/record.wav)
    
    노이즈필터 한 번
    
    *노이즈 제거 전*
    
    score : 10
    
    CCOEFF : 42
    
    *노이즈 제거 후*
    
    score : 29
    
    CCOEFF : 41
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/e373e519-2226-4f10-967a-0284a581cf54/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/399a2ebe-6e11-4ac1-a64d-c9e08c5eaf1a/VAD_TTS_girl.wav)
    

- 마이크의 성능이슈로 인해 녹음이 제대로 이루어지지 않았던 문장들이 다수 존재하였음.

## 9) 한국 단어 비교

한국어 발음 평가 할 때 다른 단어 발음을 하였을 경우 평가가 진행되지 않도록 하기 위함.

```python
from jamo import h2j, j2hcj
import unicodedata

def decompose_korean_word(word):
    """
    주어진 한국어 단어를 음소 단위로 분해합니다.
    """
    decomposed = []
    for char in word:
        if '가' <= char <= '힣':  # 한글 완성자 범위
            jamos = h2j(char)
            decomposed.append(j2hcj(jamos))
        else:
            decomposed.append(char)
    return ''.join(decomposed)

def remove_spaces(text):
    """
    주어진 텍스트에서 띄어쓰기를 제거합니다.
    """
    return text.replace(" ", "")

def compare_korean_words(word1, word2):
    """
    두 한국어 단어를 음소 단위로 분해한 후 비교합니다.
    """
    word1 = remove_spaces(word1)
    word2 = remove_spaces(word2)

    decomposed_word1 = decompose_korean_word(word1)
    decomposed_word2 = decompose_korean_word(word2)

    len1 = len(decomposed_word1)
    len2 = len(decomposed_word2)
    min_len = min(len1, len2)

    match_count = 0
    for i in range(min_len):
        if decomposed_word1[i] == decomposed_word2[i]:
            match_count += 1

    accuracy = match_count / max(len1, len2)
    return accuracy, decomposed_word1, decomposed_word2

#예제 사용
word1 = "학 교"
word2 = "학꾜"

accuracy, decomp_word1, decomp_word2 = compare_korean_words(word1, word2)

print(f"단어 1 ({word1})의 음소 분해: {decomp_word1}")
print(f"단어 2 ({word2})의 음소 분해: {decomp_word2}")
print(f"정확도: {accuracy:.2f}")
```

제시된 단어와 발음한 단어를 음소 단위로 구분하여 비교 후 정확도를 측정해주는 코드.

정확도가 일정 점수 이상이 아닐 경우 평가 불가, 일정 점수 이상일 경우 평가 진행.

## 10) siamese score & OpenCV score → final score

*가중치 : final_score = opencv_score*0.4 + siames_score *0.6*

1. 주사
    
    원본
    
    [record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/cdba0e31-8bac-4e36-93ad-3e7b4dd7e83a/record.wav)
    
    노이즈필터 한 번
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/b2c08cfe-3a5c-4511-8caa-e5a4094265ee/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/8fd7e894-35fa-49a5-9152-dc8b0e3ab7e5/VAD_TTS_girl.wav)
    
    opencv : 51
    
    siamese score : 81
    
    final score : 69
    

1. 사이
    
    원본
    
    [record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/5e4a2bbc-3b83-45c2-997e-0635b5392cf6/record.wav)
    
    노이즈필터 한 번
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/27a5e6a0-7a23-4d15-b431-e00c14a50c65/VAD_record.wav)
    
    VAD_TTS_man.wav
    
    [VAD_TTS_man.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/011574b4-188b-43cb-a49b-edc190e9f44c/VAD_TTS_man.wav)
    
    opencv : 66
    
    siamese score : 47
    
    final score : 55
    

1. 기다리다
    
    원본
    
    [record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/89f0d562-4202-48c2-9738-b2c1500377c1/record.wav)
    
    노이즈필터 한 번
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/c9758b99-e136-4a98-85b9-9b84712192a5/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/a08e23d9-772f-48b3-98cd-55304335d655/VAD_TTS_girl.wav)
    
    opencv : 60
    
    siamese score : 96
    
    final score : 82
    

1. 후추
    
    원본
    
    [record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/d0999fa8-7b71-45ff-ad68-68ce0a4ccaae/record.wav)
    
    노이즈필터 한 번
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/42efe456-51cb-4473-8f46-fc49d1fb81d1/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/954e771a-ec29-4306-8fa9-8cfc4d994015/VAD_TTS_girl.wav)
    
    opencv : 46
    
    siamese score : 88
    
    final score : 71
    

1. 운항
    
    원본
    
    [record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/bc9908f8-4427-4c59-a8c1-eb4aa5ff4a9c/record.wav)
    
    노이즈필터 한 번
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/29a62c3e-f6e8-4d75-afb6-9ec68c937a65/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/d27d3a8e-fc43-4014-aa99-bdef8050f86f/VAD_TTS_girl.wav)
    
    opencv : 58
    
    siamese score : 52
    
    final score : 54
    

 

1. 소리
    
    원본
    
    [record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/8359774f-0893-4ab4-b0ea-be71b1f77133/record.wav)
    
    노이즈필터 한 번
    
    VAD_record.wav
    
    [VAD_record.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/fd3ee899-2de2-4bee-916e-fbea80e6510e/VAD_record.wav)
    
    VAD_TTS_girl.wav
    
    [VAD_TTS_girl.wav](https://prod-files-secure.s3.us-west-2.amazonaws.com/0aea171b-14af-48c0-bd98-71d4599493cc/33e5b6b1-b6ae-45a2-a102-3c041516cad5/VAD_TTS_girl.wav)
    
    opencv : 70
    
    siamese score : 52
    
    final score : 59
    

## 11) 노이즈 제거 과정 추가 & 모델 재학습

기존의 음성데이터에서 보다 정밀하게 발음의 특징 정보를 추출하기 위하여 기존의 mel-spectrogram 이미지에서 노이즈를 더 제거해주는 전처리 과정을 추가하였다.

방법론으로서는, mel-spectrogram의 밝기가 높은 부분 ( 각 음소들의 발음에 대한 정보를 갖고있는 핵심 부분)만을 따로 추출해서 이를 추론에 이용하는 것이다. 아래의 mel-spectrogram에서 밝기가 상대적으로 높은 부분이 발음에 따라 변하는 고유한 형태이다.

<p align="center"><img width="533" src="https://github.com/mINUs-capstone-design/test-repo/assets/76035724/720b4a38-9a33-4658-9947-09803dc5d25b"></p>

“집을가다”라는 문장에 대한 mel-spectrogram”

해당 형태를 제외한 부분을 모두 필터를 거쳐 제거함으로써 음성의 발음만을 비교할 수 있도록 전처리를 거치는 것이다. 추가 처리가 이루어진 최종 mel 이미지는 아래와 같다.

<p align="center"><img width="533" src="https://github.com/mINUs-capstone-design/test-repo/assets/76035724/df863fb5-4622-4c72-aacc-aef29ff1f15f"></p>

해당 전처리 과정을 추가하여 데이터셋을 재생산, 모델의 재학습을 거쳐 최종적으로 siamese_net_r5.pt모델을 완성하였다.

## 비고

---
